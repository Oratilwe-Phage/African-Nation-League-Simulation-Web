<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>African Nations League | Tournament</title>
  <link rel="stylesheet" href="css/styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
  <h1>African Nations League</h1>
  <button id="startBtn">Start Tournament</button>
  <button id="nextBtn">Simulate Next Round</button>

  <div id="tournamentResults"></div>

  <script>
    const baseURL = "https://african-nation-league-simulation-web.onrender.com/api/tournament";

    async function startTournament() {
      try {
        const res = await fetch(baseURL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            name: "African Nations League",
            year: new Date().getFullYear(),
          }),
        });
        const data = await res.json();
        if (!res.ok) throw new Error(data.message);
        Swal.fire("✅ Success", data.message, "success");
        displayTournament(data.tournament);
      } catch (err) {
        Swal.fire("❌ Error", err.message, "error");
      }
    }

    async function simulateNextRound() {
      try {
        const res = await fetch(`${baseURL}/simulate-round`, { method: "POST" });
        const data = await res.json();
        if (!res.ok) throw new Error(data.message);
        Swal.fire("✅ Success", data.message, "success");
        displayTournament(data.tournament);
      } catch (err) {
        Swal.fire("❌ Error", err.message, "error");
      }
    }

    function displayTournament(tournament) {
      const container = document.getElementById("tournamentResults");
      container.innerHTML = `
        <h2>${tournament.name} (${tournament.year})</h2>
        <p><strong>Winner:</strong> ${tournament.winner?.country || "TBD"}</p>
        <table border="1">
          <thead>
            <tr><th>Round</th><th>Home</th><th>Score</th><th>Away</th><th>Winner</th></tr>
          </thead>
          <tbody>
            ${tournament.matches
              .map(
                (m) => `
              <tr>
                <td>${m.round}</td>
                <td>${m.homeTeam.country}</td>
                <td>${m.homeScore} - ${m.awayScore}</td>
                <td>${m.awayTeam.country}</td>
                <td>${m.winner?.country || "Draw"}</td>
              </tr>`
              )
              .join("")}
          </tbody>
        </table>
      `;
    }

    document.getElementById("startBtn").addEventListener("click", startTournament);
    document.getElementById("nextBtn").addEventListener("click", simulateNextRound);
  </script>
</body>
</html>















